
* ADDRESS

| IP地址分类 | 第一字节十进制范围 | 二进制固定高位 | 二进制网络位数 | 网络数 | 二进制主机数 | 主机数 |
| ---------- | ------------------ | -------------- | -------------- | ------ | ------------ | ------ |
| A类        | 1-126              | 0              | 8              | 126    | 24           |        |
| B类        | 128-191            | 10             | 16             |        | 16           |        |
| C类        | 192-223            | 110            | 24             |        | 8            |        |
| D类        | 224-239            | 1110           | 组播地址       |        |              |        |
| E类        | 240-254            | 11110          | 留给实验用     |        |              |        |



- **私有地址**

- - （不允许出现在互联网上）

  - **10.0.0.0-10.255.255.255**      

  - - **A类**

  - **172.16.0.0-172.31.255.255**    

  - - **B类**  

    - - **169.254.0.0 ~ 169.254.255.255** 

      - - **APIPA**

        - - 当DHCP服务器出现故障

          - **当**响应时间太长而超出系统规定时间

          - - Windows会分配一个这样的地址

  - **192.168.0.0-192.168.255.255**  

  - - **C类**

- 特殊IP地址

- - **224.0.0.0** 

  - - 是一个组播地址  
    - 1110 0000.0.0.0

  - 224.0.0.1 

  - - 指所有主机

  - 224.0.0.2 

  - - 指所有路由器

  - 224.0.0.5 

  - - OSPF路由协议专用

  - 224.0.0.9 

  - - RIPv2

  - 224.0.0.12 

  - - DHCP服务器或中继代理

  - 224.0.0.13 

  - - 支持PIM的路由器

---
- 直接广播地址 

- - 主机号全为1 

  - 作用

  - - 使路由器将一个分组以广播方式发送给特定网络上的所有主机

- 受限广播地址 

- - 网络号主机号全为1  

  - 255.255.255.255

  - 作用

  - - 本网所有主机接收分组
    - 但路由器拒绝分组通过

- 网络上特定主机地址 

- - 网络号全为0

  - 作用-

  - - 反网络掩码

- 回送地址 

- - 127.0.0.1

  - 作用-

  - - 用于网络软件测试和本地进程间通信

    - - 检测本地网卡状态

- 子网subnet

- - 将一个大的网络划分成几个较小的网络

  - - 并有自己的子网地址

  - **子网数**

  - - 2k (k为子网借用位数)

  - **可用子网数**

  - - 2k-2k (为子网借用位数)

  - eg192.24.0.0-192.24.7.0 192.24.0.0/21 主机数：8*(28-2) = 2032 eg需要2000台主机，c类网络数：   CIDR子网掩码：255.255.248.02k＝8，k＝借用3位，255-23=248,一个C类网络254主机，254*8 ＝ 2032egISP分配199.34.76.64/28，则可用地址数：2(32-28)=24=**16**

- 超网supernet

- - 将一个组织所属的几个C类网络

  - - 合并成一个更大地址范围的逻辑网络

- 子网掩码 subnet mask 

- - 网络号、子网号为1，主机号为0【】

- 反掩码 wildcard-mask

- - ( 通配符掩码) 与子网掩码相反

  - 用途

  - - 标记0和1告诉路由器应该匹配到哪

  - 反掩码+子网掩码 = 255.255.255.255

- IP

- - IP分组交付 forwarding   

  - - 同网直接交付
    - 异网间接交付
    - 路由器转发IP分组的物理传输过程与数据报转发交付机制

- - IP地址在互联网中具有**双重功能**

  - - 首先当然是用来定位信息

    - - 也就是说发出该信息的特定的计算机究竟来自哪个网络

    - 其次则是用来确认这台计算机

    - - （实际上是确认一台特定计算机上的特定的接口卡）

  - IP地址可以是公用的也可以是专用的

  - - 专用地址主要用于一个专用网络内部

    - - 但如果当其用户需要与互联网上的其他站点通信时

      - - 则必须将其转换成公用地址

    - 公用IP地址则是由各地区的IP地址注册机构来指定的

    - - 而非出售的

      - 这样的注册机构目前在全球共有4个

      - - ARIN负责北美地区

        - - 以及加勒比海和非洲赤道以南的部分地区

        - RIPE NCC负责欧洲以及非洲赤道以北地区

        - APNIC负责亚太区

        - LACNIC则负责拉美地区

        - 目前还有一个注册机构正在建立中

        - - 未来它将负责整个非洲地区的IP地址分配

    - **IPv4的地址空间只有40亿个左右**

    - **IPv6可以提供的额外地址空间高达340282366920938463463374607427×10亿**

- **IPv4协议**

- - 一种**不可靠、无连接**的数据报传送服务协议 32位二进制bits

  - 它点对点通信 ，屏蔽了物理层差异

  - IP数据报结构

  - - 标识符  identification   

    - - 鉴别分片

      - - 用于分段和重装配

    - 标志   flags          

    - - 表示接收点能否对数据报分片

    - 片偏移 fragment offset  

    - - 表示该分片在整个数据报中的相对位置

- - **松散源路由**

  - - IP分组必须经过源端指定的路由器

    - - 也可能经过没有指定的

      - - 允许相邻两个[IP地址](http://baike.baidu.com/subview/3930/3930.htm)之间跳过多个网络

    - 松散源路由选项（loose source route）

    - - 松散源路由选项只是给出[IP数据报](http://baike.baidu.com/subview/1519445/1519445.htm)必须经过的一些”要点”（IP地址清单）

      - - 并不给出一条完备的路径

        - - 无直接连接的[路由器](http://baike.baidu.com/view/1360.htm)之间的路由尚需IP软件的[寻址](http://baike.baidu.com/view/1303626.htm)功能补充

  - **严格源路由**

  - - IP分组只能经过源端指定的路由器

- IPV6

- - **优势**

  - - ***\*IPv6具有更大的地址空间\****  

    - - IPv4中IP地址长度为32

      - - 即有2^32-1（符号^表示升幂，下同）个地址

      - IPv6中IP地址长度为128

      - - 即有2^128-1个地址

    - **IPv6使用更小的路由表**

    - - IPv6的地址分配一开始就遵循聚类（Aggregation）的原则

      - - 这使得路由器能在路由表中用一条记录（Entry）表示一片子网

        - - 大大减小了路由器中路由表的长度

          - - 提高了路由器转发数据包的速度

    - **IPv6增加了增强的组播（Multicast）支持以及对流的支持（Flow Control）**

    - - 这使得网络上的多媒体应用有了长足发展的机会

      - - 为服务质量（QoS，Quality of Service）控制提供了良好的网络平台

    - IPv6加入了对自动配置（Auto Configuration）的支持

    - - 这是对DHCP协议的改进和扩展

      - - 使得网络（尤其是局域网）的管理更加方便和快捷

    - IPv6具有更高的安全性

    - - 在使用IPv6网络中用户可以对网络层的数据进行加密并对IP报文进行校验

      - - 极大的增强了网络的安全性

      - 使用两种安全性扩展

      - - IP身份验证头
        - IP封装安全性净荷 

  - **操作方法**

  - - IPv6数据包

    - - IPv6包头

      - - 40字节固定长度

      - 扩展包头

      - 上层协议数据单元PDU

    - IPv6包扩展包头中的分段包头中指明了IPv6包的分段情况

    - - 不可分段部分包括

      - - IPv6包头
        - Hop-by-Hop选项包头
        - 目的地选项包头（适用于中转路由器）
        - 路由包头

      - 可分段部分包括

      - - 认证包头
        - ESP协议包头
        - 目的地选项包头（适用于最终目的地）
        - 上层协议数据单元

    - 但是需要注意的是

    - - 在IPv6中只有源节点才能对负载进行分段

      - - 并且IPv6超大包不能使用该项服务 

- **IPv6****数据包：包头**

- - 因此尽管IPv6地址长度为IPv4的四倍

  - - IPv6包头长度仅为IPv4包头长度的两倍

    - 其中的各个字段分别为： 

    - - Version（版本号）

      - - 4位
        - IP协议版本号
        - 值= 6 

      - Traffic Class（通信类别）

      - - 8位
        - 指示IPv6数据流通信类别或优先级
        - 功能类似于IPv4的服务类型（TOS）字段 

      - Flow Label（流标记）

      - - 20位

        - IPv6新增字段，

        - 标记需要IPv6路由器特殊处理的数据流

        - - 该字段用于某些对连接的服务质量有特殊要求的通信
          - 诸如音频或视频等实时数据传输

      - 在IPv6中同一信源和信宿之间可以有多种不同的数据流

      - - 彼此之间以非“0”流标记区分

        - - 如果不要求路由器做特殊处理

          - - 则该字段值置为“0”

      - Payload Length（有效载荷）

      - - 16位负载长度

        - 负载长度包括扩展头和上层PDU

        - 16位最多可表示65535字节负载长度

        - 超过这一字节数的负载

        - - 该字段值置为“0”
          - 使用扩展头逐个跳段（Hop-by-Hop）选项中的巨量负载（Jumbo Payload）选项

      - Next Header（下一包头）

      - - 8位
        - 识别紧跟IPv6头后的包头类型
        - 如扩展头（有的话）或某个传输层协议头（诸如TCP，UDP或着ICMPv6）　 

      - Hop Limit（跳段数限制）

      - - 8位

        - 类似于IPv4的TTL（生命期）字段

        - 用包在路由器之间的转发次数来限定包的生命期

        - 包每经过一次转发

        - - 该字段减1

          - - 减到0时就把这个包丢弃

      - Source Address（源地址）

      - - 128位
        - 发送方主机地址 

      - Destination Address（目的地址）

      - - 128位

        - 在大多数情况下目的地址即信宿地址

        - - 但如果存在路由扩展头的话

          - - 目的地址可能是发送方路由表中下一个路由器接口

- **IPv6****数据包：扩展包头**

- - IPv6包头设计中对原IPv4包头所做的一项重要改进就是

  - - 将所有可选字段移出IPv6包头置于扩展头中

    - 由于除Hop-by-Hop选项扩展头外

    - - 其他扩展头不受中转路由器检查或处理

      - - 这样就能提高路由器处理包含选项的IPv6分组的性能 

  - 通常一个典型的IPv6包没有扩展头

  - - 仅当需要路由器或目的节点做某些特殊处理时

    - - 才由发送方添加一个或多个扩展头

  - 与IPv4不同IPv6扩展头长度任意

  - - 不受40字节限制

    - - 以便于日后扩充新增选项

      - - 这一特征加上选项的处理方式使得IPv6选项能得以真正的利用

        - - 但是为了提高处理选项头和传输层协议的性能

          - - 扩展头总是8字节长度的整数倍

  - 目前RFC 2460中定义了以下6个IPv6扩展头

  - - Hop-by-Hop选项包头

    - - 包含分组传送过程中

      - - 每个路由器都必须检查和处理的特殊参数选项

        - 其中的选项描述一个分组的某些特性或用于提供填充。

        - 这些选项有： 

        - - Pad1选项（选项类型为0）

          - - 填充单字节

          - PadN选项（选项类型为1）

          - - 填充2个以上字节 

          - Jumbo Payload选项（选项类型为194）

          - - 用于传送超大分组
            - 使用Jumbo Payload选项

        - 分组有效载荷长度最大可达4,294,967,295字节

        - - 负载长度超过65,535字节的IPv6包称为“超大包”

        - 路由器警告选项（选项类型为5）

        - - 提醒路由器分组内容需要做特殊处理

          - - 路由器警告选项用于组播收听者发现和RSVP（资源预定）协议

    - 目的地选项包头

    - - 指名需要被中间目的地或最终目的地检查的信息

      - 有两种用法： 

      - - 如果存在路由扩展头

        - - 则每一个中转路由器都要处理这些选项

        - 如果没有路由扩展头

        - - 则只有最终目的节点需要处理这些选项 

    - 路由包头 

    - - 类似于IPv4的松散源路由

      - IPv6的源节点可以利用路由扩展包头指定一个松散源路由

      - - 即分组从信源到信宿需要经过的中转路由器列表 

    - 分段包头 

    - - 提供分段和重装服务

      - 当分组大于链路最大传输单元（MTU）时

      - - 源节点负责对分组进行分段

        - - 并在分段扩展包头中提供重装信息 

    - 认证包头 

    - - 提供数据源认证

      - - 数据完整性检查

        - - 反重播保护

      - 认证包头不提供数据加密服务

      - - 需要加密服务的数据包

        - - 可以结合使用ESP协议

    - ESP协议包头 

    - - 提供加密服务 

- **IPv6****数据包：上层协议数据单元**

- - IPv6包有效负载

  - - IPv6扩展头

    - PDU

    - - 通常所能允许的最大字节数为65535字节
      - 大于该字节数的负载可通过使用扩展头中的选项进行发送

- - 上层数据单元即PDU

  - - 全称为Protocol Data Unit　 
    - 传输头
    - 负载（如ICMPv6消息、或UDP消息等）

- **特殊地址**

- - 全0的地址

  - - （::）表示为一个**未指明的地址**

    - - 不能将该地址分给一个接口或者目的地址

  - 回环地址

  - - （::1）用于标识一个**回环接口**

    - - 相当于IPV4中的127.0.0.1

      - - ping::1可以测试本地IPV6协议栈是否正常

  - 兼用IPV4地址

  - - （::192.168.0.1）用于使用公共IPV4地址的IPV6网络

  - IPV4地址映射 0000：0000：0000：0000：0000：FFFF：（192.168.0.1）

  - - 表示为::FFFF:（192.168.0.1）用于仅支持IPV4的节点表示IPV6地址

  - **全球单播地址格式**

  - -  网络部分提供一台设备到下行专用数据链路的定位

    - - 主机部分提供这条数据链路上该设备的标识 

      - - 16位的子网ID字段可以提供65536(216)个不同的子网

  - **本地单播地址**

  - - 使用范围限定在单条链路上的地址

    - - 唯一性只在所在的链路有效

      - - 相同的地址也可能存在于另一条链路上

        - - 因此此地址离开所在的链路是不可路由的
          - 链路本地单播地址的起始10位是1111111010(FE80::/10)

  - **IPV6单播地址分配方法**

  - **链路本地地址**

  - - **用于同一链路相连的节点间通信**

    - - 由主机网卡MAC地址附加链路本地地址前缀1111 1110 10而成

      - - 每个接口只能有一个

      - 仅仅配置一个全局单播地址也会在接口上创建一个链路本地地址(EUI-64)

      - - 接口上可以配置多个IPV6地址

        - - IPV4和IPV6地址可以同时配置

        - 以太网的接口ID是基于接口的48位MAC地址中间插入16位的0XFFFE

  - **多播地址格式**

  - - 标记位

    - - 前3位保留为0

      - 第4位

      - - 0-永久的公认的地址

        - - 1-暂时的地址

    - 范围：

    - - 节点本地-0X1
      - 链路本地-0X2
      - 地区本地-0X5
      - 组织本地-0X8
      - 全球-0XE
      - 保留-0XF 0X0

    - 组ID

    - - 前面80位设置为0

      - - 只使用后面的32位

- 常见的公认IPV6多播地址

- - 都属于永久的链路本地的范围

- **IP数据报分片、重组**  

- - 每一种物理网络都规定了各自帧的数据域最大字节长度的最大传输单元**MTU**所以分片

  - - 每个路由器都将接收到的帧拆包

    - - 再封装成另外一个帧

      - - 帧格式与长度取决于物理网络所采用的协议

- IP编制

- - **CIDR Classless InterDomain Routing \**无类别域间路由\****

​    

- **NAT** 基本网络地址转换

- - 静态NAT    

  - - 将私有地址和外部地址一对一地转换

  - 动态NAT（NAT池）  

  - - 建立一个IP地址池

    - - 设定被转换的IP地址范围

  - PAT- 端口NAT(复用内部的全局地址)

  - - 将私有IP池映射为S0/0的IP地址

- **ARP** （Address Resolution Protocol）地址解析协议

- - **（报文封装在以太网帧中传送）**

- - - **ip逻辑地址、协议地址由网络层使用**

    - - **mac地址由数据链路层使用**

  - ARP实现了协议地址到物理地址的映射

- - - 应用将包分交给ip地址

  - - ip知道对方协议地址

    - - 但不知对方MAC物理地址

      - - IP向下传给数据链路之前

    - - 检查本地内存中的ARP地址映射表－－限制了不必要的广播
      - - 存在则转发
        - 若不存在，则广播ARP请求分组，路由器转发此分组，至每一台主机
        - - 若MAC地址相符则发ARP响应分组
          - 若不符，则不予回答

- **RARP** 反向地址转换协议

- **ICMP** 因特网控制管理协议  

- - IP的辅助协议

  - 差错控制报文

  - - 目标不可达

    - - 不能把IP数据报送达目标主机

    - 源抑制

    - - 网络出现拥塞

    - 超时

    - - IP数据报的生存期已超时（TTL=0）

    - 参数问题

    - - 当判断出IP数据报头部字段或语义出错

    - 路由重定向

    - - 告诉主机一个更短的路由路径

  - 询问报文

  - - 回(声)送请求

    - - 测试两点之间线路是否畅通（ping命令）

    - 时间戳请求

    - - 测试两点之间通信延迟

      - - traceroute命令

        - - Unix系统

        - tracert命令 

        - - windows系统

​     

- 路由协议 

- - 在路由指导IP数据包发送过程中事先约定好的规定和标准

  - **静态路由** 

  - - **默认路由**

    - **ICMP重定向**

    - **使用静态路由**

    - - **DDR**
      - **NAT**

    - **路由表**

    - - **固定选择，不随网络流量和拓扑变化而改变**  

    - 算法

    - - 洪泛算法Flooding
      - 基于流量算法 Flow-Based Routing

    - **为什么要有默认路由**

    - - 路由得查看[路由表](http://baike.baidu.com/view/149989.htm)而决定怎么转发[数据包](http://baike.baidu.com/view/25880.htm)

      - - 用静态路由一个个的配置

        - - 繁琐易错

      - 如果[路由器](http://baike.baidu.com/view/1360.htm)有个邻居知道怎么前往所有的目的地

      - - 可以把[路由表](http://baike.baidu.com/view/149989.htm)匹配的任务交给它

        - - 省了很多事

      - 例如[网关](http://baike.baidu.com/view/807.htm)会知道所有的路由

      - - 如果一个[路由器](http://baike.baidu.com/view/1360.htm)连接到网关

        - - 就可以配置[默认路由](http://baike.baidu.com/view/1240261.htm)

          - - 把所有的[数据包](http://baike.baidu.com/view/25880.htm)都转发到网

    - **为什么默认路由是0.0.0.0**

    - - 匹配IP地址时

      - - 0表示wildcard

        - - 任何值都可以

          - - 所以0.0.0.0和任何目的地址匹配都会成功

            - - 造成默认路由要求的效果

  - **动态路由**

  - - **RIP(UDP520)**

    - **OSPF**

    - **BGP(TCP179)**

    - **IS-IS**

    - **路由表**

    - - **自适应路由 每个节点保存一张转发表**

    - 算法

    - - 按寻径算法分类

      - - **距离向量路由算法** 

        - - **D-V**  
          - RIP 
          - BGP
          - IGRP

        - **链路状态路由算法** 

        - - **L-S**   
          - OSPF 
          - IS-IS

  - 按工作区域分类:

  - - **域内路由协议（Interior Gateway Protocol，IGP）**    

    - - RIP
      - OSPF
      - IS-IS

    - **域间路由协议（Exterior Gateway Protocol，EGP）**  

    - - EGP
      - BGP

  - 按路由类型分类:

  - - **单播路由协议**  

    - - RIP
      - OSPF
      - IS-IS
      - IGRP
      - BGP

    - **组播路由协议**  

    - - DVMRP
      - PIM-SM
      - PIM-DM
      - MOSPF
      - MBGP

- **RIP** 路由信息协议

- - **（内部网关协议）** 

  - 采用D-V 

  - - UDP 520端口 

    - - 30秒一发 打击15步以内

  - 特点

  - - **最大度量值**

    - - 最大跳步数为15

      - - 当为16时

        - - 认为网络不可达

          - - 丢弃数据包

    - **水平分割**

    - - 避免路由环路

      - - 一条路由信息不会发给该信息的来源方

    - **路由中毒**

    - - 标记该路由为无穷大

      - - 中毒路由被发给邻居路由器

        - - 通知该路由失效

    - **反向下毒**

    - - 当邻居路由器被成功下毒后

      - - 邻居路由器会向毒源方向下毒

    - **保持时间**

    - - 让路由器保持down状态一段时间

      - - 直到所有路由器均学习到该路由的状态

        - - 同时在保持时间为超时是

          - - 不再接收邻居路由器发来关于该路由的更新信息

  - **RIP有两个版本分别为RIPv1和RIPv2**

  - - RIPv2支持VLSM（可变长度子网掩码 ）、CIDR（无类别域间路由 ）

    - - 而RIPv1不支持

    - RIPv2支持明文和MD5密文认证

    - RIPv2采用组播方式更新路由，**组播地址224.0.0.9**

    - -  RIPv1采用广播方式更新路由

    - RIPv2采用触发更新方式来加速路由收敛

    - RIPv2采用水平分割方法来消除路由循环

    - - 一条路由信息不会发给该信息的来源方

    - RIPv2与RIPv1相同的最大条数15

  - **基本配置命令**

  - - Router rip 

    - - //启用RIP路由进程

    - Version 2  

    - - //声明RIP版本为第二版

    - Network 192.168.5.0  

    - - //发布直连网段，可以写上掩码，不写RIP会根据接口IP**自动判断**

- **OSPF** 开放最短路径优先协议

- -  采用L-S，hello可达，链路请求更新确认，搭乘IP协议

  - **优点**

  - - OSPF没有跳数限制
    - OSPF支持VLSM和CIDR
    - OSPF采用触发更新，收敛速度快

  - **三张表：**邻居表 拓扑表 路由表

  - OSPF网络一般划分为两个逻辑的级别层次

  - - **骨干区域**一般记为**area0**
    - **非骨干区域**
    - **标准区域**
    - - **接收任何链路更新信息和路由汇总**
    - **主干区域**
    - - **连接各个区域，其它区域通过主干交换路由信息。主干拥有标准区域所有特性**
    - **存根区域**
    - - **不接受本地AS以外的路由信息，对AS意外目标采用默认路由0.0.0.0**
    - 完全存根
    - - 如上，同时也不接受AS内部其他区域的汇总信息，cisco专用
    - 不完全存根－ 类似存根，但接收类型7的链路公告

  - DR指定路由器     

  - - 担任LSA（链路状态通告 ）信息集中点

  - BDR备份指定路由器

  - - 是LSA信息第二集中点，通过计时器监视DR的更新活动。

  - **DR与BDR选举**

  - - 路由器**优先级**（默认为1）高的为DR
    - 优先级相同则为**router ID大**的为DR
    - 一般router ID为**最大的IP**地址，如果有回环口，则**回环口IP**优先为ID。
    - 优先级为0不参加选举，优先级影响一个选区进程
    - 但不强制更新已生效的DR和BDR路由器。

  - Hello报文

  - - 采用**组播方式发送**，地址为**224.0.0.5**，其大小为50字节
    - 在OSPF网络中，路由器定时发出Hello分组与特定的邻居进行联系
    - 默认情况下40s没收到该分组就认为对方不存在了

  - LSU，链路状态更新包

  - **基本配置命令**

  - - Router ospf process-id 

    - - //启动ospf进程

- - - Network address 

    - - *反掩码* area *area-id*

      - *Network \*10.1.1.2 0.0.0.0\* area \*0** 

      - - **//发布的时直连IP地址，此时反掩码应写为0.0.0.0**

      - *Network \*10.0.0.0 0.255.255.255\* area \*0** 

      - - **//发布的直连网段**

    - ip ospf priority 10 

    - - //范围为0-255

    - ip ospf cost 200  

    - - //范围1-65535

- IGRP

- - 每90s发送一次路由更新广播

  - - 如果**270s**没有收到路由更新

    - - 则认为路由不可访问

      - - **630s**后清除该路由

  - IGRP度量标准

  - - **带宽（默认）**

    - **延迟（默认）**

    - **可靠性**

    - **负载**

    - 量度最小的做最佳路径

    - **IGRP可以简化为跳步数**

    - - **而不使用跳步数作为路由度量**

  - **不支持**

  - - **VLSM**
    - **不连续子网**

  - **基本配置命令**

  - - Router igrp 109 

    - - //109自治系统号

    - Network network-number 

    - - //发布直连网段

    - Bandwidth 带宽     

    - - **单位为****Kbps**

    - Clock rate 时钟

- EIGRP

- - 其度量值有

  - - **带宽**
    - **延迟**
    - **可靠性**
    - **负载**
    - **最大传输单元**

  - **支持**

  - - **VLSM**
    - **CIDR**

  - **基本配置命令**

  - - Router eigrp 109 

    - - //109自治系统号

    - Network network-number  

    - - /发布直连网段

      - - **网段是子网时带反掩码**

    - No auto-summary 

    - - //处理不连续子网时关闭汇总

  - **eg**

  - - **路由度量metric** 

    - - **[k1\*带宽＋（K2\*带宽）／（256-负载）＋K3\*延迟］＋［K5/（可靠性＋K4）］**

    - **默认的K值**

    - -  **K1 ＝ 1 K2 ＝ 0 K3 ＝ 1 K4 ＝ 0 K5 ＝ 0**

      - **当K5=0时**

      - - **metric ＝ 带宽＋延迟**

- **常见路由协议管理距离**

- - 直连网段

  - - 管理距离为0

  - RIP

  - - 管理距离120

  - OSPF

  - - 管理距离为110

  - IGRP

  - - 管理距离100

  - EIGRP

  - - 管理距离90

- **网关协议**

- - IGP  

  - - 自治系统内部网关之间交换路由信息执行内部网关协议

  - EGP 

  - - 不同的自治系统之间交换路由信息执行外部网关协议

  - BGP 

  - - 最新的外部网关协议EGP叫BGP

- - **BGP特点** 

- - - BGP报文通过TCP连接传送（TCP179）

- - - BGP属于距离矢量路由算法协议

- - - 采用增量更新

    - - 触发更新

      - - 逐跳路由模式发布路由信息

- - - 周期性的发送Keepalive信息验证TCP连接

- - - 支持路由汇总CIDR技术

    - - 形成超级网络

    - BGP网关向对等实体发布可以到达的AS列表

    - **BGP三张表**

    - - **邻居表**
      - **BGP转发表**
      - **路由表**

    - **BGP具体有四种报文**

    - - **Open报文**           

      - - 用于建立邻居关系

- - - - **Update报文**         

      - - 用于发送新的路由信息

      - **Keepalive报文**        

      - - 用于对open的应答和周期性的确认邻居关系

      - **Notification通告报文**   

      - - 用于报告检测到的错误

-  **X.25 面向连接分组交换网**   

- - OSI标准 虚电路服务

  - - 物理层协议     X.21

    - - 数据链路层协议 LAPD协议（HDLC的一部分）

      - - 分组层        

        - - PLP协议（支持SVC交换虚电路、 PVC永久虚电路）

  - 两个X.25网络互连使用X.75协议

  - X.25的流量和差错控制机制与HDLC相似

  - - 其默认窗口大小为2

    - - 差错控制采用后退N帧ARQ协议

  - X.25由于复杂的差错校验机制

  - - 导致传输效率受到限制

    - - 同时传输速率不快

      - - 一般为64kb/s

  - 优点

  - - 可以在一条物理链路上开放多条虚电路供多个用户使用

    - 具有动态路由功能和复杂完备的误码纠错功能

    - 可以满足不同速率和不同型号的终端与计算机间

    - - 计算机与计算机间以及局域网和局域网间的数据通信

- ATM网络层

- - AAL （ATM Adaptation Layer, [ATM适配层](http://baike.baidu.com/view/262765.htm)）

  - - AAL的目的是允许现有的协议和应用运行在ATM上

    - - 汇聚子层 CS  

      - - 对高层数据进行分段并封装在CS-PDU(汇聚子层[协议数据单元](http://baike.baidu.com/view/451435.htm))中

      - 拆装子层 SAR 

      - - 将CS-PDU分割成若干个相同大小（不大于48B）的[数据段](http://baike.baidu.com/view/1005328.htm)

        - - 使它能够封装在信元中

  - AAL有4种协议类型

  - - AAL1、AAL2、AAL3/AAL4和AAL5分别支持各种AAL业务类型。

  - CCITT通信业务分类 ATM4.0

  - - A级 

    - - 支持有实时性要求的恒定位速率业务CBR

      - - 采用面向连接的工作方式

        - - 比特率恒定

      - 要求同步

      - - AAL1支持此类业务

        - - 常用业务为64KB/s的话音

          - - 固定码率的**非压缩视频**

    - B级 

    - - 支持有实时性要求的可变位速率业务VBR

      - - 采用面向连接的工作方式

        - - 比特率可变

      - 要求同步

      - - AAL2支持此类业务

        - - 常用业务为压缩的

          - - 语音通信和**压缩的视频通信**

    - C级 

    - - 支持无实时性要求的可变速率业务ABR

      - - 采用面向连接工作方式

        - - 比特率可变

      - 不要求同步

      - - AAL3/4支持此类业务

        - - 适用于文件传递和数据网业务

    - D级 

    - - 支持面向无连接的数据传输业务UBR

      - - 采用无连接工作方式

        - - 比特流可变

      - 不要求同步

      - - AAL3/4和AAL5均支持此类业务

        - - 适用于数据报业务和数据网业务

- 无线局域网 IEEE802.11

- - CSMA/CA  

  - - 支持竞争访问

    - - 分布式协调和点协调功能支持无竞争的访问

    - 不采用CSMA/CD的原因是

    - - 为了解决隐蔽终端问题

      - - 因为无线网中进行冲突检测困难

    - 最常用的加密手段：

    - - **WEP**（共享密钥）
      - **WPA/WPA2**
      - **WPA-PSK/WPA2-PSK（**TKIP+AES算法**）**  

1. - 定义了两种拓扑结构：

   - - 基于基础设施网络

     - - 该方式所有无线终端通过AP访问骨干网络或者互访

       - - AP如同网桥

         - - 完成802.11与802.3MAC协议之间的转换

- - - 特殊网络（Ad Hoc）

    - - 该方式是一种点对点的网络

      - - 不需要有线网络和AP

        - - 以无线网卡连接的终端设备之间可以互联通信

  - 类型速率：

  - - 802.11a

    - - 工作在5.2Ghz频率

      - - 54Mb/s 

        - - OFDM

    - 802.11h

    - - 工作在5.2Ghz频率

    - 802.11  

    - - 工作在2.4Ghz频率

      - - 2Mb/s

        - - FHSS DSSS

    - 802.11b

    - - 工作在2.4Ghz频率

      - - 11Mb/s 

        - - DSSS

    - 802.11g

    - - 工作在2.4Ghz频率

      - - 54Mb/s 

        - - OFDM

    - 802.11n

    - - 利用MIMO技术和OFDM（频分多路复用）结合

      - - 理论上可提供300Mbps甚至是600Mbps的传输速率

- 无线局域网 IEEE802.11I

- - 在数据加密方面定义了三种方式:

  - - TKI

    - - TKIP采用WEP中的RC4算法

    - CCMP  

    - - 基于AES算法

    - WRAP  

    - - 基于AES算法

- 无线局域网的关键技术 

- - 红外通信

  - 窄带微波    

  - - 申请许可证的窄带RF
    - **免**申请许可证的窄带RF

  - 扩展频谱（扩频）通信 

  - - 频率跳动**FHSS**
    - **直接序列DSSS**

  - 过程

  - - 输入数据首先进入[信道编码器](http://baike.baidu.com/view/5121068.htm)

    - - 产生一个接近某中央频谱的较窄带宽的[模拟信号](http://baike.baidu.com/view/38288.htm)

      - - 再用一个伪随机序列对这个信号进行调制

        - - 调制的效果是大大扩宽了信号的[带宽](http://baike.baidu.com/view/10821.htm)，即扩展了频谱

    - 在接收端使用同样的伪随机序列来恢复原来的信号

    - - 最后再进入信道[解码器](http://baike.baidu.com/subview/1079/11149159.htm)来恢复数据

  - 实现目的

  - - 将信号散布到更宽的带宽上以减少发生阻塞和干扰的机会     

- VPN （VirtualPrivateNetwork）

- - 虚拟专用网络

  - VPN 主要采用四项技术来保证安全

  - - 隧道技术（Tunneling）

    - 加解密技术（Encryption & Decryption）

    - 密钥管理技术（Key Management）

    - 使用者与设备身份认证技术（Authentication）

    - 传输模式 

    - - IP包头没有保护

- - - 隧道模式 

    - - IP包头被保护

- - **隧道技术Tunneling**  

  - - **连接不同类型网络**

- - - 隧道技术是VPN的基本技术类似于点对点连接技术

    - - 它在公用网建立一条数据通道（隧道）
      - 让数据包通过这条隧道传输

    - 隧道是由隧道协议形成分为第二、三层隧道协议

    - - **第二层隧道协议是先把****各种网络协议封装到PPP协议帧****中**

      - - **再把整个数据包装入隧道协议中**

        - - 这种双层封装方法形成的数据包靠第二层协议进行传输。

- - - - 第二层隧道协议有

      - - L2F

        - PPTP

        - L2TP

        - - L2TP协议是目前IETF的标准

          - - 由IETF融合PPTP与L2F而形成

      - **第三层隧道协议是把****各种网络协议直接装入隧道协议****中**

      - - **形成的数据包依靠第三层协议进行传输**

      - 第三层隧道协议

      - - VTP

        - IPSec

        - - IP Security

          - 定义了一个系统来提供安全协议选择

          - 安全算法

          - 确定服务所使用密钥等服务

          - - 从而在IP层提供安全保障

      - BGP/MPLS VPN

    - 一般隧道均有如下基本功能

    - -  复用

      - - 即在相同的两个物理设备之间

        - - 不同用户的业务流需要用不同的隧道传送

        - 相同两个IP端点之间需要有多个隧道

        - - 以满足多个用户同时传送数据流

          - - 又要求相互隔离

        - 实现这个要求有两种解决办法

        - - 建立多个并行的隧道;

          - 一个隧道通过复用

          - - 分成多个逻辑隧道

        - 隧道复用是常用的方法

        - - 为此隧道协议要有一个复用机制

          - - 同时隧道协议要有一个复用域

            - - 以区别哪个数据包属于哪个隧道

        - 可减少时延和建立隧道的处理负担

        - 包括

        - - **L2TP(通过Tunnel-id和Sessin-id域)**
          - **MPLS(通过标记)**
          - **IPSec(通过安全参数索引域)有复用机制**

        - 严格地说GRE没有复用域

        - - 但这可以通过数据包发送者的认证加以解决

          - - 而IP/IP是没有复用域的

      -  支持多协议传送

      - - VPN应该能支持多协议数据流

        - **采用L2TP建立的隧道**

        - - 由于它使用PPP协议传送数据包

          - - 并通过PPP封装的包头域中指明被封装的协议类型和协议

            - - 所以**能方便地支持多协议传送**

              - - **GRE可通过协议的识别加以解决**

                - - GRE（Generic Routing Encapsulation）

        - IP Over IP的GRE封装

        - IPSec、IP/IP隧道由于最初设计是用于IP数据包的

        - - 没有类似的协议识别域

          - - 所以不能支持多协议传送

            - 但最近的研究表明

            - - **通过扩充IPSec协议簇**

              - - **也使其具有了上述能力**

            - 例如扩充IPSec的信令部分——IKE

            - - 以便指出数据流的协议类型等

- - - - 帧排序

      - - 帧排序可使接收端与发送端数据帧或数据包的序列相一致

        - - 这是VPN用户的基本要求

          - - 它等效于物理租用线路或专用连接所具有的特性

        - 为了实现该功能

        - - 隧道机制必需支持编序域

          - - L2TP与GRE有这种域

            - - IPSec虽然有编序域

        - 但它不是为按序投送数据包设计的

        - - 为此IPSec做了扩充

          - - 可使用IKE与对端协商确定该域是否用于排序  

            -  另外为了保证隧道正常运行

            - - 当发生故障时

              - - 帧排序具有恢复措施等隧道维护功能

  - 加解密技术

  - - VPN可直接利用现有技术

  - 密钥管理技术

  - - 密钥管理技术的主要任务是如何在公用数据网上安全地传递密钥而不被窃取

    - 现行密钥管理技术

    - - SKIP

      - - 利用Diffie-Hellman的演算法则

        - - 在网络上传输密钥  

      - ISAKMP/OAKLEY

      - - 双方都有两把密钥

        - - 分别用于公用、私用。

  - 使用者与设备身份认证技术

  - - 使用者名称与密码或卡片式认证等方式

- IPSEC

- - 两种工作模式  

  - - 传输模式

    - - IP头 ＋ AH或ESP ＋有效载荷  

    - 隧道模式  

    - - 新IP头 ＋ AH＋ IP头 ＋有效载荷
      - 新IP头 ＋ ESP头＋ IP头 ＋有效载荷＋ESP尾

  - 其加密和认证过程所使用密钥

  - - 由**IKE**机制生成和分发

  - 隧道是利用一种协议来传输另一种协议

  - - 乘客协议

    - 隧道协议

    - 承载协议

    - 加密的实现层次

    - IPSEC SA（Security Association,安全联盟）

    - - 主要包括

      - - AH网络认证协议 Authentication Header  

        - - 只进行数据摘要（MD5/SHA）
          - 为IP网络提供数据源认证
          - 数据完整性
          - 反重播保证
          - 保护通信免受篡改
          - **不提供保密服务**

        - - 支持的认证（安全散列）算法

          - - MD5 

            - - MD5  128位（16字节）  

            - SHA1

            - - SHA 160位（20字节）  

- - - - - 传输模式AH封装

- - - - - 隧道模式AH封装

  - **ESP****封装安全载荷协议 Encapsulating Security Payload**

  - - 为数据包提供

    - - 完整性检查

      - - 认证和加密

        - - 机密性和防篡改

    - 支持算法:

    - - DES 
      - 3DES
      - MD5-HMACSHA-HMAC 

    - 传输模式ESP封装

    - 隧道模式ESP封装

- - **IPSEC与NAT**

  - - **AH模式无法与NAT一起运行**

  

- - - 启用IPSEC NAT穿越后，新增了一个UDP头

- **IKE** **密钥管理协议** 

- - **Internet Key Exchange  (UDP 500)**

  - **IKE策略的建立步骤**

  - - **加密算法encryption**

    - - **默认DES**

    - **散列算法hash**

    - - **默认SHA**

    - **密钥交换group**

    - - **默认1**

    - **验证方法authentication**

    - - **默认rsa-si**

      - **认证采用预共享密钥pre-share**

      - - **则在路由器中配置key**  

    - **SA生命周期lifetime**

    - - **默认86400 （1天）**

  - 完成两个任务

  - - （1）安全关联的集中化管理，减少连接时间
    - （2）密钥生成和管理

  - IKE协商的两个协商阶段：

  - - 1.建立一个IKE SA，为阶段二提供保护，主模式和野蛮模式（无法抵抗DOS）
    - 2.完成IPSEC SA的协商，快速模式

- **MPLS** 多协议标签交换

- - **目的**

  - - **提高路由器转发速度**

  - **核心思想**

  - - **利用标签交换取代路由运算和路由交换**

  - 技术核心

  - - 在IP数据包之外封装一个32位的MPLS包头

  - 位置

  - - MPLS标签被插入在以太帧头和IP头之间

  - MPLS VPN承载平台组成：

  - - P路由器  

    - - 核心网路由器

    - PE路由器 

    - - 边缘路由器

      - - 与CE路由器相连

        - - 负责待传数据包的MPLS标签生成和弹出 

    - CE路由器 

    - - 直接与电信运营商相连额用户端路由器

      - - 该设备不存在任何带有标签的数据包

  - 其它VPN技术

  - - 老式VPN   

    - - ATM/FR/X.25

    - SSL Secure 

    - - Sockets Layer

    - L2F Layer 2 Forwardinng

    - DVPN Dynamic VPN动态VPN

    - 基于VLAN的VPN

    - 802.1QinQ

    - XOT（X.25 over TCP Protocol）

- **加密算法**

- - 对称加密算法 

  - -  双方共享一个密钥
    - 块加密
    - 流加密
    - 把数据和密钥一起hash

  - 非对称加密算法 

  - - 双方密钥不同
    - RSA算法
    - 单向散列函数

- 划分4种网络类型：

- - 广播多址网络   

  - - Ethernet
    - FDDI
    - Token Ring

  - 非广播多路访问

  - - 帧中继
    - X.25
    - ATM
    - SMDS

  - 点对点网络    

  - - PPP
    - HDLC
    - LAPD

  - 点到多点网络 

  - - RARP协议网络

- **网络互连**

- - 中继器 repeater   

  - - 物理层

    - - 拷贝比特

      - - 弱信号再生放大

  - 网桥   bridge    

  - - 数据链路层

    - - 转发帧

      - - 可以改变帧格式

  - 路由器 router    

  - - 网络层

    - - 转发数据包

      - -  转换网络协议

- 冲突域

- - 连接在同一导线上的所有工作站的集合

  - - 中继器和集线器连接的所有节点处在**同一冲突域**
    - 网桥、交换机和路由器可以分割冲突域

- **广播域**

- - 指接受同样广播消息的节点的集合

  - - 网桥和交换机连接的所有节点处在**同一广播域**
    - 路由器和三层交换设备可以分割广播域

- **交换机**

- - 按交换方式分为

  - - 直通式交换
    - 存储转发式交换
    - 碎片过滤式交换

  - 从工作原理上以太网交换机是一种多端口网桥

  - 封装协议

  - - dot1q

    - - dot1q支持4096个vlan

      - - 其中两个保留

        - - 因此可用4094个  

    - ISL

    - - ISL最多支持1024个vlan

   



- - 交换机端口参数：

  - - （1）端口类型

    - - 双绞线端口RJ-45

      - - 可提供100M和1000M两种

      - SC端口

      - - 千兆光纤端口

      - GBIC端口

      - - 千兆光电转换接口

      - SPF端口

      - - GBIC端口的升级

    - （2）传输模式：双工，半双工，自适应

    - （3）包转发率

    - - 交换机进行数据包转发的能力叫包转发率

      - 包转发率

      - - 千兆口数×1.488Mpps+百兆口数×0.1488Mpps

    - （4）背板带宽

    - - 交换机端口处理器和数据总线之间单位时间内所能传输的最大数据量   

      - 交换机端口总带宽

      - - 端口数×2×端口速
        - 24*2*109bps=48*103Mbps=48G

    - （5）MAC地址数

    - - 指交换机的MAC地址表中可以存储的MAC地址数量

    - （6）VLAN表项

    - - 反映一台交换机所能支持的最大VLAN数

    - （7）机架插槽数

    - - 指安装最大模块数

  - 端口状态：

  - - **阻塞：**

    - - 仅监听BPDU

      - - 不转发数据帧

        - - 也不学习接受帧的MAC地址

          - - 延时20s

            - - 防止启动交换机过程中产生交换环路

    - **监听：**

    - - 相互学习BPDU的信息

      - - 以便交换机可以学习网络中其他交换机的信息

        - - 延时15s

          - - 此时**不学习MAC帧**的地址

            - - 不转发数据帧

    - **学习：**

    - - 处理学习到的BPDU信息

      - - 开始计算生成树协议

        - - 学习MAC地址

          - - 建立地址表

            - - 但**不转发数据帧**

              - - 该状态维持15s

    - **转发：**

    - - 可以发送或监听BPDU

      - - 用桥协议数据单元来传递交换机之间的生成树协议的信息

        - - 也可以转发数据帧

    - **禁用：**

    - - 端口不参与生成树协议

      - - 不监听也不发送BPDU  

        - - 也不转发数据帧

- - *端口类型：*

  - - Portfast（端口快速）

    - - 使端口从阻塞状态快速恢复到转发状态

      - - 以达到快速收敛的目的

        - - 用于所有阻塞端口

    - Uplinkfast（上行快速）

    - - 使端口从阻塞状态快速恢复到转发状态

      - - **只用于接入层交换机**的阻塞上行级联端口

    - Backbonefast

    - - 与uplinkfast作用相同

      - - 但可以诊断非直连链路故障

        - - 并且使生成树快速收敛

- - 端口开销规定：

  - - 10G端口开销为    

    - - 2

    - 1000M端口开销为  

    - - 4

    - 100M端口开销为   

    - - 19

    - 10M端口开销为   

    - - 100



- SPF生成树协议：

- - IEEE802.1d

  - - 总延时为50s

  - 根网桥的确定

  - - 交换机标示符ID最小

    - - 2字节的优先级

      - 6字节MAC地址

      - 优先级值越小优先级越高

      - - 优先级相同

        - - MAC地址最小的为根桥

  - 根端口确定

  - - 最小路径开销的端口为根端口

    - - 如果路径开销相同

      - - 取端口标识最小的为根端口

- 路由器   

- - 提供了异构网互联的机制

  - - 实现将一个网络的数据包发送到另一个网络

    - - 指导IP数据包发送的路径信息

- - 思科路由器内存体系

  - - 闪存flash

    - - 可读写  
      - 存储当前使用的IOS
      - 重启或关机后仍能保存数据

    - ROM

    - - 只读
      - 用于系统初始化
      - POST加电自检
      - BootStrap系统引导代码
      - 出场自带IOS版本，一般比现运行电版本低一些

    - RAM

    - - 可读写
      - 重启或关机后仍能保存数据

    - NVRAM

    - - 速度较快

      - 成本较高

      - 仅用于保存

      - - 启动配置文件Startup-Config

      - 32kb~128kb

- - - DRAM

    - - 可读写

      - 速度最快

      - 临时保存

      - - 路由表
        - ARP缓冲区
        - 运行日志
        - 排队等待发送的分组
        - 运行配置文件Running-Config

      - 重启或关机后不能保存数据，全部丢失

- **局域网接口**

- - 常见的以太网接口主要有AUI、BNC和RJ-45接口，还有FDDI、ATM、千兆以太网等都有相应的网络接口

  - **AUI端口**

  - - AUI端口它就是用来与粗同轴电缆连接的接口

    - 它是一种“D”型15针接口

    - 这在令牌环网或总线型网络中是一种比较常见的端口之一

    - 连接

    - - 路由器可通过粗同轴电缆收发器实现与10Base-5网络的连接

      - 但更多的则是借助于外接的收发转发器（AUI-to-RJ-45）

      - - 实现与10Base-T以太网络的连接。
        - 也可借助于其他类型的收发转发器实现与细同轴电缆（10Base-2）或光缆（10Base-F）的连接

  - **RJ-45端口**

  - - 它是我们常见的双绞线以太网端口

    - 因为在快速以太网中也主要采用双绞线作为传输介质

    - 根据端口的通信速率不同RJ-45端口  

    - - 10Base-T网RJ-45端口

      - - 在路由器中通常是标识为“ETH”

      - 100Base-TX网RJ-45端口

      - - 通常标识为“10/100bTX”

    - 但端口中对应的网络电路结构是不同的，所以也不能随便接

   



- - **SC端口**

  - - SC端口也就是我们常说的光纤端口

    - 它是用于与光纤的连接

    - 光纤端口通常是不直接用光纤连接至工作站

    - 而是通过光纤连接到快速以太网或千兆以太网等具有光纤端口的交换机

    - 这种端口一般在高档路由器才具有

    - - 都以“100b FX”标注

- **广域网接口** 

- - 在以太网中一般都要求在100Mbps快速以太网以上

  - **RJ-45端口**

  - - 利用RJ-45端口也可以建立广域网与局域网VLAN（虚拟局域网）之间

    - - 以及与远程网络或Internet的连接

    - 如果使用路由器为不同VLAN提供路由时

    - - 可以直接利用双绞线连接至不同的VLAN端口

      - - 但要注意这里的RJ-45端口所连接的网络一般就不太可有是10Base-T这种了

        - - 一般都是100Mbps快速以太网以上

    - 如果必须通过光纤连接至远程网络

    - - 或连接的是其他类型的端口时

      - - 则需要借助于收发转发器才能实现彼此之间的连接

  - **AUI端口**

  - - 用于与粗同轴电缆连接的网络接口

    - 其实AUI端口也被常用于与广域网的连接

    - 但是这种接口类型在广域网应用得比较少

    - 在Cisco 2600系列路由器上

    - - 提供了AUI与RJ-45两个广域网连接端口

  - SERIAL**高速同步串口**

  - - 在路由器的广域网连接中

    - - 应用最多的端口还要算“高速同步串口”（SERIAL）

    - 这种端口主要是用于

    - - DDN
      - 帧中继（Frame Relay）
      - X.25
      - PSTN（模拟电话线路）

    - 在企业网之间有时也通过DDN或X.25等广域网连接技术进行专线连接

    - - 这种同步端口一般要求速率非常高

      - - 因为一般来说通过这种端口所连接的网络的两端都要求实时同步 

  - ASYNC**异步串口**

  - - 异步串口（ASYNC）主要是应用于Modem或Modem池的连接

    - - 它主要用于实现远程计算机通过公用电话网拨入网络

    - 这种异步端口相对于上面介绍的同步端口来说在速率上要求就松许多

    - - 因为它并不要求网络的两端保持实时同步

      - - 只要求能连续即可

        - - 主要是因为这种接口所连接的通信方式速率较低

  - **ISDN BRI端口**

  - - ISDN BRI端口用于ISDN线路通过路由器实现与Internet或其他远程网络的连接

    - - 可实现128Kbps的通信速率

    - ISDN有两种速率连接端口

    - - 一种是ISDN BRI（基本速率接口）
      - 另一种是ISDN PRI（基群速率接口）

    - ISDN BRI端口是采用RJ-45标准

    - - 与ISDN NT1的连接使用RJ-45-to-RJ-45直通线

  - SFP **收发器模块**Small Form-Factor Pluggable

- **路由器配置接口** 

- - 路由器的配置端口有两个

  - - Console

    - - 通常是用来进行路由器的基本配置时通过专用连线与计算机连用的  

    - AUX

    - - 用于路由器的远程配置连接用的

  - **Console端口**

  Console端口使用配置专用连线直接连接至计算机的串口，利用终端仿真程序（如Windows下的“超级终端”）进行路由器本地配置。

   路由器的Console端口多为RJ-45端口。如下图10所示就包含了一个Console配置端口。

- - **AUX端口**

  AUX端口为异步端口，主要用于远程配置，也可用于拔号连接，还可通过收发器与MODEM进行连接。

   AUX端口与Console端口通常同时提供，因为它们各自的用途不一样。接口图示仍参见上述图10。

**ACL 访问控制列表**

是路由器和交换机接口的指令列表，用来控制端口进出的数据包。

ACL适用于所有的被路由协议，如IP、IPX、AppleTalk等。

作用：

ACL可以限制[网络流量](http://baike.baidu.com/view/411702.htm)、提高网络性能。例如，ACL可以根据[数据包](http://baike.baidu.com/view/25880.htm)的协议，指定数据包的优先级。

ACL提供对通信流量的控制手段。例如，ACL可以限定或简化[路由](http://baike.baidu.com/view/18655.htm)更新信息的长度，

   从而限制通过[路由器](http://baike.baidu.com/view/1360.htm)某一网段的通信流量。

ACL是提供[网络安全](http://baike.baidu.com/view/17495.htm)访问的基本手段。ACL允许[主机](http://baike.baidu.com/view/23880.htm)A访问[人力资源](http://baike.baidu.com/view/2537.htm)网络，而拒绝主机B访问。

ACL可以在[路由器](http://baike.baidu.com/view/1360.htm)端口处决定哪种类型的通信流量被转发或被阻塞。

   例如，用户可以允许E-mail通信流量被[路由](http://baike.baidu.com/view/18655.htm)，拒绝所有的Telnet通信流量。

记住 3P 原则：

​    每种协议 (per protocol)、每个方向 (per direction)、每个接口 (per interface) 配置一个 ACL：

每种协议一个 ACL：要控制接口上的流量，必须为接口上启用的每种协议定义相应的 ACL。

每个方向一个 ACL ：一个 ACL 只能控制接口上一个方向的流量。

​                 要控制入站流量和出站流量，必须分别定义两个 ACL。

每个接口一个 ACL ：一个 ACL 只能控制一个接口（例如[快速以太网](http://baike.baidu.com/view/154896.htm)0/0）上的流量。

三种主要的ACL:

   标准ACL：只能根据ip源地址进行过滤；

   扩展ACL：可对ip源地址、目标地址、上层协议、协议信息进行过滤；

   命名ACL



```
【】子网掩码的简便算法

举例说明该算法。

例：给定一 class c address : 192.168.5.0 ，要求划分20个子网，每个子网5个主机。

解：

针对C类地址

因为4 <5 < 8 ，用256－8＝248 ――>即是所求的子网掩码，

对应的子网数也就出来了。

下面是我自己推出来的针对B类地址的做法。

对于B类地址

假如主机数小于或等于254，与C类地址算法相同。

对于主机数大于254的，如需主机 700台，50个子网（相当大了），
 512 < 700< 1024 
256－（1024/256）=256－4＝252 ――>即是所求的子网掩码，对应的子网数也就
出来了。

上面256－4中的4（2的2次幂）是指主机数用2进制表示时超过8位的位数，

即超过2位，掩码为剩余的前6位，即子网数为2（6）－2＝62个。

一、利用子网数来计算

在求子网掩码之前必须先搞清楚要划分的子网数目，以及每个子网内的所需主机数目。
1)将子网数目转化为二进制来表示

2)取得该二进制的位数，为 N

3)取得该IP地址的类子网掩码，将其主机地址部分的的前N位置 1 即得出该IP地址划分子网的子网掩码。

如欲将B类IP地址168.195.0.0划分成27个子网：
1)27=11011
2)该二进制为五位数，N = 5
3)将B类地址的子网掩码255.255.0.0的主机地址前5位置 1，得到 255.255.248.0

二、利用主机数来计算
1)将主机数目转化为二进制来表示
2)如果主机数小于或等于254（注意去掉保留的两个IP地址），则取得该主机的二进制位数，为 N，这里肯定 N<8。如果大于254，则 N>8，这就是说主机地址将占据不止8位。

3)使用255.255.255.255来将该类IP地址的主机地址位数全部置1，然后从后向前的将N位全部置为 0，即为子网掩码值。

如欲将B类IP地址168.195.0.0划分成若干子网，每个子网内有主机700台：
\1) 700=1010111100
2)该二进制为十位数，N = 10
3)将该B类地址的子网掩码255.255.0.0的主机地址全部置 1，得到255.255.255.255
然后再从后向前将后 10位置0,即为： 11111111.11111111.11111100.00000000
即255.255.252.0。这就是该欲划分成主机为700台的B类IP地址 168.195.0.0的子网掩码。

下面列出各类IP地址所能划分出的所有子网，其划分后的主机和子网占位数，以及主机和子网的（最大）数目，

注意要去掉保留的IP地址(即划分后有主机位或子网位全为“0”或全为“1”的)
```
