# hwclock 
```
Linux机器上的时间比较复杂，有各式各样的时钟和选项等等。
一：
机器里有两个时钟:硬件时钟和系统时钟
硬件时钟从根本上讲是CMOS时钟；
系统时钟是由内核维护的，它是从1969年末（即传说中的标志Unix时代开端的那个拂晓）开始算起的累积秒数。
在DOS或Mac系统中，起作用的是硬件时钟。遗憾的是，你可能已经发现了，绝大多数电脑时钟都是很不准确的。它们从根本上讲是由小型电池供电的警报器时钟，这种锂电池一般可持续供电三年左右，那时候你系统各大块差不多都已经过时了。
而在Linux系统中，起作用的是系统时钟。在启动时，它靠读取硬件时钟获得计时起点，而不是靠记忆计时。
你可以通过BIOS修改系统硬件时钟，或者如果你不想重起机器，那就用hwclock命令。
当你使用hwclock命令调整硬件时间很多次以后，hwclock就会获取你的时钟推移速率，然后就会把这个信息存在/etc/adjtime里边。以后，你就可以用它来随时更新你的硬件时间，用一条下面的命令：
hwclock --adjust
硬件时钟通常被设置成全球标准时间（UTC），而将时区信息保存在/usr/share/lib/timezone （或者在某些系统中可能是/usr/local/timezone）目录下某个适当的文件中，然后用一个符号链接文件/etc/localtime指向它。
查看硬件时钟用命令：
hwclock --show 或者 hwclock -r
重置硬件时钟用：
\#date 042817252009.00 //设置系统时钟 2009 年 04 月 28 日 星期四 17:25:00 CST
\#hwclock -w
如果需要修改你的时区信息，可以使用tzset命令，如果你系统中没有这条命令，那可以用类似下面的操作：
ln -s /etc/localtime /usr/share/zoneinfo/US/Pacific
```

```
二：
实例：
板子上电
\#date 042817252009.00 //设置系统时钟 2009 年 04 月 28 日 星期四 17:25:00 CST
\#hwclock -w //将系统时钟写入硬件时钟
\#hwclock -r //看时间是否在变化
如果没有出错， 就已经把2009 年 04 月 28 日 星期四 17:25:00 CST 写入RTC chip了
为了使系统时间和RTC时间同步，可以在初始化文件中添加命令
hwclock –s
使每次开机时读取RTC时间，并同步给系统时间。
在根文件系统：usr/etc/rc.local中添加
/sbin/hwclock -s
断电
等2分钟在上电
\#hwclock -r //看时间是否同步，即使与2分钟后的时间相同
扩展阅读二:linux中时间设置date、hwclock、clock
```

```
Windows时钟大家可能十分熟悉了，Linux时钟在概念上类似Windows时钟显示当前系统时间，但在时钟分类和设置上却和Windows大相径庭。和Windows不同的是，Linux将时钟分为系统时钟(System Clock)和硬件(Real Time Clock，简称RTC)时钟两种。系统时间是指当前Linux  Kernel中的时钟，而硬件时钟则是主板上由电池供电的那个主板硬件时钟，这个时钟可以在BIOS的"Standard BIOS  Feture"项中进行设置。
既然Linux有两个时钟系统，那么大家所使用的Linux默认使用哪种时钟系统呢？会不回出现两种系统时钟冲突的情况呢？这些疑问和担心不无道理。首先，Linux并没有默认哪个时钟系统。当Linux启动时，硬件时钟会去读取系统时钟的设置，然后系统时钟就会独立于硬件运作。
从Linux启动过程来看，系统时钟和硬件时钟不会发生冲突，但Linux中的所有命令(包括函数)都是采用的系统时钟设置。不仅如此，系统时钟和硬件时钟还可以采用异步方式，即系统时间和硬件时间可以不同。这样做的好处对于普通用户意义不大，但对于Linux网络管理员却有很大的用处。例如，要将一个很大的网络中(跨越若干时区)的服务器同步，假如位于美国纽约的Linux服务器和北京的Linux服务器，其中一台服务器无须改变硬件时钟而只需临时设置一个系统时间，如要将北京服务器上的时间设置为纽约时间，两台服务器完成文件的同步后，再与原来的时钟同步一下即可。这样系统和硬件时钟就提供了更为灵活的操作。
在Linux中，用于时钟查看和设置的命令主要有date、hwclock和clock。其中，clock和hwclock用法相近，只不过clock命 令除了支持x86硬件体系外，还支持Alpha硬件体系。由于目前绝大多数用户使用x86硬件体系，所以可以视这两个命令为一个命令来学习。
```

```
1.在虚拟终端中使用date命令来查看和设置系统时间
  查看系统时钟的操作：
  \# date
  设置系统时钟的操作：
  \# date 091713272003.30
  通用的设置格式：
  \# date 月日时分年.秒
  2.使用hwclock或clock命令查看和设置硬件时钟
  查看硬件时钟的操作：
  \# hwclock --show 或
  \# clock --show
  2003年09月17日 星期三 13时24分11秒 -0.482735 seconds
  设置硬件时钟的操作：
  \# hwclock --set --date="09/17/2003 13:26:00"
  或者
  \# clock --set --date="09/17/2003 13:26:00"
  通用的设置格式：hwclock/clock --set --date=“月/日/年时：分：秒”。
  3.同步系统时钟和硬件时钟
  Linux系统(笔者使用的是[Red Hat](http://www.linuxidc.com/topicnews.aspx?tid=10) 8.0，其它系统没有做过实验)默认重启后，硬件时钟和系统时钟同步。如果不大方便重新启动的话(服务器通常很少重启)，使用clock或hwclock命令来同步系统时钟和硬件时钟。
  硬件时钟与系统时钟同步：
  \# hwclock --hctosys
  或者
  \# clock --hctosys
  上面命令中，--hctosys表示Hardware Clock to SYStem clock。
  系统时钟和硬件时钟同步：
  \# hwclock --systohc
  或者
  \# clock --systohc
 ```
