
#get

#set
## /etc/logrotate.d set deploy files
cat /etc/logrotate.d/nginx
/data/logs/nginx/*.log {      
        daily
        missingok
        rotate 7
        compress
        notifempty
        sharedscripts
        dateext
        postrotate
                [ -f /var/run/nginx.pid ] && kill -USR1 `cat /var/run/nginx.pid`
        endscript
}

#run
#-#corntab
/bin/bash /root/scripts/logrotate/logrotate
 
#--#cat /root/scripts/logrotate/logrotate
#!/bin/sh

/usr/sbin/logrotate -s /var/lib/logrotate/logrotate.status /etc/logrotate.conf
EXITVALUE=$?
if [ $EXITVALUE != 0 ]; then
    /usr/bin/logger -t logrotate "ALERT exited abnormally with [$EXITVALUE]"
fi
exit 0

#---#cat /etc/logrotate.conf
weekly
rotate 4
create
dateext
include /etc/logrotate.d          
/var/log/wtmp {
    monthly
    create 0664 root utmp
	minsize 1M
    rotate 1
}

/var/log/btmp {
    missingok
    monthly
    create 0600 root utmp
    rotate 1
}






#test
logrotate -d -f /etc/logrotate.d/nginx

